"use strict";

exports.__esModule = true;

var _templateObject = _taggedTemplateLiteralLoose(["\n  box-sizing: border-box;\n  position: relative;\n  background-color: #f2f2f2;\n  border-radius: 8px;\n  padding: 8px;\n  margin: 48px auto;\n  max-width: 90%;\n  width: 550px;\n\n  ", "\n"], ["\n  box-sizing: border-box;\n  position: relative;\n  background-color: #f2f2f2;\n  border-radius: 8px;\n  padding: 8px;\n  margin: 48px auto;\n  max-width: 90%;\n  width: 550px;\n\n  ", "\n"]),
    _templateObject2 = _taggedTemplateLiteralLoose(["\n  background-color: #fdfdfd;\n  border-radius: 4px;\n  padding: 20px;\n  margin: 0;\n\n  ", "\n"], ["\n  background-color: #fdfdfd;\n  border-radius: 4px;\n  padding: 20px;\n  margin: 0;\n\n  ", "\n"]),
    _templateObject3 = _taggedTemplateLiteralLoose(["\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", Arial, sans-serif;\n  font-size: 30px;\n  font-weight: 800;\n  margin: 0 0 10px 0;\n  text-align: left;\n  word-break: break-word;\n\n  ", "\n"], ["\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", Arial, sans-serif;\n  font-size: 30px;\n  font-weight: 800;\n  margin: 0 0 10px 0;\n  text-align: left;\n  word-break: break-word;\n\n  ", "\n"]),
    _templateObject4 = _taggedTemplateLiteralLoose(["\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", Arial, sans-serif;\n  font-size: 15px;\n  font-weight: 400;\n  line-height: 21px;\n  margin: 0 0 10px 0;\n  text-align: left;\n\n  ", "\n"], ["\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", Arial, sans-serif;\n  font-size: 15px;\n  font-weight: 400;\n  line-height: 21px;\n  margin: 0 0 10px 0;\n  text-align: left;\n\n  ", "\n"]),
    _templateObject5 = _taggedTemplateLiteralLoose(["\n  display: flex;\n\n  @media all and (max-width: 500px) {\n    flex-direction: column;\n  }\n\n  ", "\n"], ["\n  display: flex;\n\n  @media all and (max-width: 500px) {\n    flex-direction: column;\n  }\n\n  ", "\n"]),
    _templateObject6 = _taggedTemplateLiteralLoose(["\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", Arial, sans-serif;\n  background-color: #fdfdfd;\n  color: #333333;\n  border-color: #f2f2f2;\n  border-style: solid;\n  border-width: 5px;\n  font-size: 16px;\n  height: 40px;\n  line-height: 20px;\n  margin-bottom: 10px;\n  margin-top: 0;\n  padding: 10px 10px;\n  box-sizing: border-box;\n  width: 70%;\n  max-width: 100%;\n  margin-right: 16px;\n\n  @media all and (max-width: 500px) {\n    width: 100%;\n  }\n\n  ", "\n"], ["\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", Arial, sans-serif;\n  background-color: #fdfdfd;\n  color: #333333;\n  border-color: #f2f2f2;\n  border-style: solid;\n  border-width: 5px;\n  font-size: 16px;\n  height: 40px;\n  line-height: 20px;\n  margin-bottom: 10px;\n  margin-top: 0;\n  padding: 10px 10px;\n  box-sizing: border-box;\n  width: 70%;\n  max-width: 100%;\n  margin-right: 16px;\n\n  @media all and (max-width: 500px) {\n    width: 100%;\n  }\n\n  ", "\n"]),
    _templateObject7 = _taggedTemplateLiteralLoose(["\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", Arial, sans-serif;\n  background-color: #000000;\n  border: none;\n  border-radius: 25px;\n  box-shadow: none;\n  color: #ffffff;\n  font-size: 18px;\n  font-weight: 700;\n  height: 40px;\n  line-height: 20px;\n  padding: 10px 20px;\n  box-sizing: border-box;\n  display: inline-block;\n  cursor: pointer;\n\n  &:hover {\n    box-shadow: inset 0 0 100px 100px rgba(255, 255, 255, 0.25);\n  }\n\n  ", "\n"], ["\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", Arial, sans-serif;\n  background-color: #000000;\n  border: none;\n  border-radius: 25px;\n  box-shadow: none;\n  color: #ffffff;\n  font-size: 18px;\n  font-weight: 700;\n  height: 40px;\n  line-height: 20px;\n  padding: 10px 20px;\n  box-sizing: border-box;\n  display: inline-block;\n  cursor: pointer;\n\n  &:hover {\n    box-shadow: inset 0 0 100px 100px rgba(255, 255, 255, 0.25);\n  }\n\n  ", "\n"]),
    _templateObject8 = _taggedTemplateLiteralLoose(["\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", Arial, sans-serif;\n  font-size: 15px;\n  font-weight: 600;\n  line-height: 21px;\n  text-align: center;\n  margin: 0;\n  margin-top: 4px;\n\n  ", "\n"], ["\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    \"Helvetica Neue\", Arial, sans-serif;\n  font-size: 15px;\n  font-weight: 600;\n  line-height: 21px;\n  text-align: center;\n  margin: 0;\n  margin-top: 4px;\n\n  ", "\n"]);

var _react = require("react");

var _react2 = _interopRequireDefault(_react);

var _propTypes = require("prop-types");

var _propTypes2 = _interopRequireDefault(_propTypes);

var _styledComponents = require("styled-components");

var _styledComponents2 = _interopRequireDefault(_styledComponents);

var _reactMailchimpSubscribe = require("react-mailchimp-subscribe");

var _reactMailchimpSubscribe2 = _interopRequireDefault(_reactMailchimpSubscribe);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _taggedTemplateLiteralLoose(strings, raw) { strings.raw = raw; return strings; }

var SubscribeCard = function SubscribeCard(_ref) {
  var mailchimpURL = _ref.mailchimpURL,
      tinyletterUsername = _ref.tinyletterUsername,
      outerCardStyle = _ref.outerCardStyle,
      innerCardStyle = _ref.innerCardStyle,
      title = _ref.title,
      titleStyle = _ref.titleStyle,
      description = _ref.description,
      descriptionStyle = _ref.descriptionStyle,
      subContainerStyle = _ref.subContainerStyle,
      subInputStyle = _ref.subInputStyle,
      buttonText = _ref.buttonText,
      subButtonStyle = _ref.subButtonStyle,
      responseStyle = _ref.responseStyle,
      emailPlaceholder = _ref.emailPlaceholder;

  return mailchimpURL ? _react2.default.createElement(_reactMailchimpSubscribe2.default, {
    url: mailchimpURL,
    render: function render(_ref2) {
      var subscribe = _ref2.subscribe,
          status = _ref2.status,
          message = _ref2.message;
      return _react2.default.createElement(NewsletterForm, {
        status: status,
        message: message,
        onValidated: function onValidated(formData) {
          return subscribe(formData);
        },
        outerCard: outerCardStyle,
        innerCard: innerCardStyle,
        title: titleStyle,
        titleText: title,
        description: descriptionStyle,
        descriptionText: description,
        subContainer: subContainerStyle,
        subInput: subInputStyle,
        subButton: subButtonStyle,
        buttonText: buttonText,
        response: responseStyle,
        emailPlaceholder: emailPlaceholder
      });
    }
  }) : tinyletterUsername ? _react2.default.createElement(NewsletterForm, {
    tinyletterUsername: tinyletterUsername,
    outerCard: outerCardStyle,
    innerCard: innerCardStyle,
    title: titleStyle,
    titleText: title,
    description: descriptionStyle,
    descriptionText: description,
    subContainer: subContainerStyle,
    subInput: subInputStyle,
    subButton: subButtonStyle,
    buttonText: buttonText,
    response: responseStyle,
    emailPlaceholder: emailPlaceholder
  }) : _react2.default.createElement(NewsletterForm, {
    outerCard: outerCardStyle,
    innerCard: innerCardStyle,
    title: titleStyle,
    titleText: title,
    description: descriptionStyle,
    descriptionText: description,
    subContainer: subContainerStyle,
    subInput: subInputStyle,
    subButton: subButtonStyle,
    buttonText: buttonText,
    response: responseStyle,
    emailPlaceholder: emailPlaceholder
  });
};

SubscribeCard.propTypes = process.env.NODE_ENV !== "production" ? {
  subURL: _propTypes2.default.string,
  outerCardStyle: _propTypes2.default.string,
  innerCardStyle: _propTypes2.default.string,
  titleStyle: _propTypes2.default.string,
  descriptionStyle: _propTypes2.default.string,
  subContainerStyle: _propTypes2.default.string,
  subInputStyle: _propTypes2.default.string,
  subButtonStyle: _propTypes2.default.string,
  responseStyle: _propTypes2.default.string,
  emailPlaceholder: _propTypes2.default.string
} : {};

exports.default = SubscribeCard;


var NewsletterForm = function NewsletterForm(_ref3) {
  var tinyletterUsername = _ref3.tinyletterUsername,
      status = _ref3.status,
      message = _ref3.message,
      onValidated = _ref3.onValidated,
      outerCard = _ref3.outerCard,
      innerCard = _ref3.innerCard,
      title = _ref3.title,
      titleText = _ref3.titleText,
      description = _ref3.description,
      descriptionText = _ref3.descriptionText,
      subContainer = _ref3.subContainer,
      subInput = _ref3.subInput,
      subButton = _ref3.subButton,
      buttonText = _ref3.buttonText,
      response = _ref3.response,
      emailPlaceholder = _ref3.emailPlaceholder;

  var email = void 0;
  var submit = function submit(event) {
    event.preventDefault();
    return email && email.value.indexOf("@") > -1 && onValidated({
      EMAIL: email.value
    });
  };

  var tinyURL = "https://tinyletter.com/" + tinyletterUsername;
  var submitTiny = "window.open('https://tinyletter.com/" + tinyletterUsername + "', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true";

  var placeholder = emailPlaceholder ? emailPlaceholder : "Your email";

  return tinyletterUsername ? _react2.default.createElement(
    FormWrapper,
    { outerCard: outerCard },
    _react2.default.createElement(
      Form,
      {
        innerCard: innerCard,
        action: tinyURL,
        method: "post",
        target: "popupwindow",
        onsubmit: submitTiny
      },
      _react2.default.createElement(
        FormTitle,
        { title: title },
        titleText ? titleText : "Join my newsletter"
      ),
      _react2.default.createElement(
        FormDescription,
        { description: description },
        descriptionText ? descriptionText : "Subscribe and I'll send you my latest blog posts by email. Also,\n          you'll be the first to hear about new things I'm working on."
      ),
      _react2.default.createElement(
        SubContainer,
        { subContainer: subContainer },
        _react2.default.createElement(FormInput, {
          id: "tlemail",
          type: "email",
          name: "email",
          placeholder: placeholder,
          "aria-label": "email",
          subInput: subInput
        }),
        _react2.default.createElement("input", { type: "hidden", value: "1", name: "embed" }),
        _react2.default.createElement(
          FormButton,
          { type: "submit", value: "Subscribe", subButton: subButton },
          buttonText ? buttonText : "Subscribe"
        )
      )
    )
  ) : _react2.default.createElement(
    FormWrapper,
    { outerCard: outerCard },
    _react2.default.createElement(
      Form,
      { onSubmit: submit, innerCard: innerCard },
      _react2.default.createElement(
        FormTitle,
        { title: title },
        titleText ? titleText : "Join my newsletter"
      ),
      _react2.default.createElement(
        FormDescription,
        { description: description },
        descriptionText ? descriptionText : "Subscribe and I'll send you my latest blog posts by email. Also,\n          you'll be the first to hear about new things I'm working on."
      ),
      _react2.default.createElement(
        SubContainer,
        { subContainer: subContainer },
        _react2.default.createElement(FormInput, {
          ref: function ref(node) {
            return email = node;
          },
          type: "email",
          placeholder: placeholder,
          "aria-label": "email",
          subInput: subInput
        }),
        _react2.default.createElement(
          FormButton,
          { type: "submit", subButton: subButton },
          buttonText ? buttonText : "Subscribe"
        )
      ),
      status === "sending" && _react2.default.createElement(
        FormResponse,
        { response: response, style: { color: "#8e8e93" } },
        "sending..."
      ),
      status === "error" && _react2.default.createElement(FormResponse, {
        response: response,
        style: { color: "#ff2d55" },
        dangerouslySetInnerHTML: { __html: message }
      }),
      status === "success" && _react2.default.createElement(FormResponse, {
        response: response,
        style: { color: "#4cd964" },
        dangerouslySetInnerHTML: { __html: message }
      })
    )
  );
};

NewsletterForm.propTypes = process.env.NODE_ENV !== "production" ? {
  status: _propTypes2.default.string,
  message: _propTypes2.default.string,
  onValidated: _propTypes2.default.func,
  outerCard: _propTypes2.default.string,
  innerCard: _propTypes2.default.string,
  title: _propTypes2.default.string,
  description: _propTypes2.default.string,
  subContainer: _propTypes2.default.string,
  subInput: _propTypes2.default.string,
  subButton: _propTypes2.default.string,
  response: _propTypes2.default.string,
  emailPlaceholder: _propTypes2.default.string
} : {};

var FormWrapper = _styledComponents2.default.div(_templateObject, function (props) {
  return props.outerCard && props.outerCard;
});

var Form = _styledComponents2.default.form(_templateObject2, function (props) {
  return props.innerCard && props.innerCard;
});

var FormTitle = _styledComponents2.default.h3(_templateObject3, function (props) {
  return props.title && props.title;
});

var FormDescription = _styledComponents2.default.p(_templateObject4, function (props) {
  return props.description && props.description;
});

var SubContainer = _styledComponents2.default.div(_templateObject5, function (props) {
  return props.subContainer && props.subContainer;
});

var FormInput = _styledComponents2.default.input(_templateObject6, function (props) {
  return props.subInput && props.subInput;
});

var FormButton = _styledComponents2.default.button(_templateObject7, function (props) {
  return props.subButton && props.subButton;
});

var FormResponse = _styledComponents2.default.p(_templateObject8, function (props) {
  return props.response && props.response;
});
module.exports = exports["default"];